

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configurations &mdash; aequitas  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using Aequitas with Python" href="using_python.html" />
    <link rel="prev" title="Using the CLI" href="CLI.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> aequitas
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="30_seconds_aequitas.html">Getting started with <em>aequitas-report</em>:</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="30_seconds_webapp.html">Running the webapp locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_data.html">Understanding Input Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_data.html">Understanding Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Understanding the Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="CLI.html">Using the CLI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configurations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Define-reference-groups">Define reference groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Score-threshholds">Score threshholds</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Choosing-Metrics">Choosing Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Fairness-threshold">Fairness threshold</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Attribute-columns">Attribute columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Project-information">Project information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Databases">Databases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_python.html">Using Aequitas with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/aequitas.html">Aequitas API</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">aequitas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configurations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/config.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Configurations">
<h1>Configurations<a class="headerlink" href="#Configurations" title="Permalink to this headline">¶</a></h1>
<p>Configurations can be set in .yml file. See example
<a class="reference external" href="https://github.com/dssg/aequitas/tree/master/src/aequitas_cli">config.yml</a>
on github.</p>
<div class="section" id="Define-reference-groups">
<h2>Define reference groups<a class="headerlink" href="#Define-reference-groups" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">--ref-group-method</span> <span class="pre">&lt;type&gt;</span></code></p>
<p>Fairness is always determined in relation to a reference group. By
default, aequitas uses the majority group level for a given group as the
reference group.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;majority&quot;</span></code> Define fairness in relation to the majority in a
group.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;min_metric&quot;</span></code> Define fairness in relation to the subgroup with the
lowest value on a given metric.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;predefined&quot;</span></code> Define fairness in relation to groups of your
choice.</li>
</ul>
<p>The predefined reference groups are set in the configuration file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ref_groups_method</span><span class="p">:</span> <span class="s2">&quot;predefind&quot;</span>

<span class="n">reference_groups</span><span class="p">:</span>
  <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;male&quot;</span>
  <span class="s2">&quot;age_cat&quot;</span><span class="p">:</span> <span class="s2">&quot;35-50&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="Score-threshholds">
<h2>Score threshholds<a class="headerlink" href="#Score-threshholds" title="Permalink to this headline">¶</a></h2>
<p>If the input <code class="docutils literal notranslate"><span class="pre">score</span></code> column is not binary, you can test the impact of
alternative cutoffs on fairness metrics.</p>
<p>Thresholds are set in the configuration file.</p>
<div class="highlight-{bash} notranslate"><div class="highlight"><pre><span></span>thresholds:
   rank_abs: [300]
   rank_pct: [1.0, 5.0, 10.0 ]
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">rank_abs</span></code> classify the observations with the top n as 1 and the
remainder as 0. With <code class="docutils literal notranslate"><span class="pre">rank_pct</span></code> classify the top n percent as 1 and
the rest as 0.</p>
</div>
<div class="section" id="Choosing-Metrics">
<h2>Choosing Metrics<a class="headerlink" href="#Choosing-Metrics" title="Permalink to this headline">¶</a></h2>
<p>Choose from:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'Statistical</span> <span class="pre">Parity'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'Impact</span> <span class="pre">Parity'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'FOR</span> <span class="pre">Parity'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'FDR</span> <span class="pre">Parity'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'FPR</span> <span class="pre">Parity'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'FNR</span> <span class="pre">Parity'</span></code></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fairness_measures</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;FPR Parity&quot;</span><span class="p">,</span> <span class="s2">&quot;FNR Parity&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="Fairness-threshold">
<h2>Fairness threshold<a class="headerlink" href="#Fairness-threshold" title="Permalink to this headline">¶</a></h2>
<p>Disparity is determined in terms of ratios. When the disparity ratio
cross the fairness threshold, the decision is deemed unfair on that
metric. Notice this is different from the webapp, which is
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">fairness_threshold</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fairness_threshold</span><span class="p">:</span> <span class="mf">0.8</span>
</pre></div>
</div>
</div>
<div class="section" id="Attribute-columns">
<h2>Attribute columns<a class="headerlink" href="#Attribute-columns" title="Permalink to this headline">¶</a></h2>
<p>You can manually set attribute columns to be assessed for fairness.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attr_cols</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;zipcode_pct_black&quot;</span><span class="p">,</span> <span class="s2">&quot;zipcode_median_income&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="Project-information">
<h2>Project information<a class="headerlink" href="#Project-information" title="Permalink to this headline">¶</a></h2>
<p>Your project title and goal will be inserted into the report.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project_description</span><span class="p">:</span>
    <span class="n">title</span><span class="p">:</span> <span class="s2">&quot;Insert project title&quot;</span>
    <span class="n">goal</span><span class="p">:</span> <span class="s2">&quot;Insert project goal.&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="Databases">
<h2>Databases<a class="headerlink" href="#Databases" title="Permalink to this headline">¶</a></h2>
<p>To connect to a database instead of using “–input ”, use the db key,
credentials, and input_query. These are set in config.yaml.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="p">:</span>
    <span class="n">db_credentials</span><span class="p">:</span>
        <span class="n">host</span><span class="p">:</span> <span class="n">your_host</span>
        <span class="n">database</span><span class="p">:</span> <span class="n">your_db</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">your_user</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">your_pass</span>
        <span class="n">port</span><span class="p">:</span> <span class="mi">5432</span>
</pre></div>
</div>
<p>The input query should return a table with score, label_value columns
and then each attribute you want to use for bias analysis</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_query</span><span class="p">:</span> <span class="s2">&quot;select id, score, label_value, attribute_1, attribute_2 from results.predictions left join ...&quot;</span>
</pre></div>
</div>
<p>The output schema is optional, default=public</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output_schema</span><span class="p">:</span> <span class="n">results</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using_python.html" class="btn btn-neutral float-right" title="Using Aequitas with Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="CLI.html" class="btn btn-neutral" title="Using the CLI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Center for Data Science and Public Policy.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>